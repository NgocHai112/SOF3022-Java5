<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>User Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">
<div class="d-flex justify-content-end mb-3">
    <a href="/logout" class="btn btn-outline-danger">Logout</a>
</div>
<h3 class="text-center mb-4">USER MANAGEMENT (FULL CRUD + LOGIN + INTERCEPTOR)</h3>

<form th:action="@{/user/create}" th:object="${user}" method="post" class="mb-4">
    <div class="mb-3">
        <label class="form-label fw-bold">User ID:</label>
        <input th:field="*{id}" class="form-control" placeholder="User ID">
        <small class="text-danger" th:errors="*{id}"></small>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Fullname:</label>
        <input th:field="*{fullname}" class="form-control" placeholder="Fullname">
        <small class="text-danger" th:errors="*{fullname}"></small>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Email:</label>
        <input th:field="*{email}" class="form-control" placeholder="Email">
        <small class="text-danger" th:errors="*{email}"></small>
    </div>

    <div class="mb-3">
        <label class="form-label fw-bold">Password:</label>
        <input th:value="*{password}" type="password" class="form-control" placeholder="Password">
        <small class="text-danger" th:errors="*{password}"></small>
    </div>

    <div class="text-center mt-3">
        <button formaction="/user/create" class="btn btn-success">Create</button>
        <button formaction="/user/update" class="btn btn-primary">Update</button>
        <a href="/user/index" class="btn btn-secondary">Reset</a>
    </div>
</form>

<form th:action="@{/user/search}" method="post" class="d-flex mb-3">
    <input name="keyword" class="form-control me-2" placeholder="Search by ID or Name" >
    <button class="btn btn-outline-primary">Search</button>
</form>

<table class="table table-bordered table-hover text-center">
    <thead class="table-light">
    <tr><th>ID</th><th>Fullname</th><th>Email</th><th>Action</th></tr>
    </thead>
    <tbody>
    <tr th:each="u : ${users}">
        <td th:text="${u.id}"></td>
        <td th:text="${u.fullname}"></td>
        <td th:text="${u.email}"></td>
        <td>
            <a th:href="@{|/user/edit/${u.id}|}" class="btn btn-sm btn-warning">Edit</a>
            <a th:href="@{|/user/delete/${u.id}|}" class="btn btn-sm btn-danger">Delete</a>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>
